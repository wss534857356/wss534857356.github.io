<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="google-site-verification" content="AcxOG708AVSkFdK4sLQ2FI8qSSAZxcGYI06MQTtJuAE" />











  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="shenshun">
<meta property="og:url" content="http://wss534857356.github.io/index.html">
<meta property="og:site_name" content="shenshun">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="shenshun">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> shenshun </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">shenshun</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/10/31/Random-number-part1/" itemprop="url">
                  Random number part1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-10-31T20:54:20+08:00" content="2017-10-31">
              2017-10-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日志/" itemprop="url" rel="index">
                    <span itemprop="name">日志</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何利用一个小范围随机数生成一个大范围的随机数"><a href="#如何利用一个小范围随机数生成一个大范围的随机数" class="headerlink" title="如何利用一个小范围随机数生成一个大范围的随机数"></a>如何利用一个小范围随机数生成一个大范围的随机数</h1><h2 id="用一个5以内的随机数函数生成一个7以内的随机数函数"><a href="#用一个5以内的随机数函数生成一个7以内的随机数函数" class="headerlink" title="用一个5以内的随机数函数生成一个7以内的随机数函数"></a>用一个5以内的随机数函数生成一个7以内的随机数函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rand5 = () =&gt; ~~(<span class="built_in">Math</span>.random()*<span class="number">5</span>) <span class="comment">// 利用这个函数生成5以内的随机数</span></span><br></pre></td></tr></table></figure>
<p>这题的解题思路很简单, 只要利用这个函数生成一个平均分布的范围大于7的随机数就可以了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rand7 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> val = rand5()*<span class="number">5</span> + rand5() <span class="comment">// 平均分布 6~30 所以标准范围是6~26</span></span><br><span class="line">  <span class="keyword">return</span> val&gt;<span class="number">26</span>?rand7():val%<span class="number">7</span>+<span class="number">1</span> <span class="comment">// 27~30之间的数据全部抛弃重新随机</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">100000000</span>;i++) &#123;</span><br><span class="line">  b[rand7()]++</span><br><span class="line">  <span class="comment">// [0, 14286297, 14287880, 14282580, 14287830, 14278935, 14285595, 14290883]</span></span><br><span class="line">  <span class="comment">// 从数据看出是随机的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="延伸-如何利用一个小范围随机数生成一个大范围的随机数"><a href="#延伸-如何利用一个小范围随机数生成一个大范围的随机数" class="headerlink" title="延伸: 如何利用一个小范围随机数生成一个大范围的随机数"></a>延伸: 如何利用一个小范围随机数生成一个大范围的随机数</h2><p>重点在于如何保证随机数的平均分布<br>从<code>rand5()*5 + rand5()</code> 可以看出实现的原理是先生成一个[5,10,15,20,25]间隔为5的随机数组后再使用一个随机数去填充这个数组, 那么对于更大范围的数比如一个大于25的数, 就需要<code>rang5()*5*5+rand5()*5+rand5()</code> 得到一个区间是 31~155 总的范围长度为125的数组<br>所以只需要递归获得一个大于范围的数组长度, 就可以得到一个由小范围随机数生成的大范围随机数, 具体代码就不贴出来了, 有兴趣可以自己实现一下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里给出一个我偶然想到的阶乘</span></span><br><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="keyword">function</span>(<span class="params">n, x, num=n</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// n 是对应的进制</span></span><br><span class="line">  <span class="comment">// x 表示进位的长度</span></span><br><span class="line">  <span class="comment">// num 表示被用于做乘法的数</span></span><br><span class="line">  <span class="comment">// 所以 factorial(n, x, num) = num * n^x</span></span><br><span class="line">  <span class="keyword">const</span> val = num.toString(n)</span><br><span class="line">  <span class="keyword">return</span> x?<span class="built_in">parseInt</span>(val.padEnd(val.length+x,<span class="string">"0"</span>),n):<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(factorial(<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>) === <span class="number">5</span>&lt;&lt;<span class="number">4</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/14/安装nginx服务器/" itemprop="url">
                  安装nginx服务器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-14T10:52:40+08:00" content="2017-06-14">
              2017-06-14
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础介绍"><a href="#基础介绍" class="headerlink" title="基础介绍"></a>基础介绍</h1><p>Nginx是一款面向性能设计的HTTP服务器，相较于Apache、lighttpd具有占有内存少，稳定性高等优势。与旧版本（&lt;=2.2）的Apache不同，nginx不采用每客户机一线程的设计模型，而是充分使用异步逻辑，削减了上下文调度开销，所以并发服务能力更强。整体采用模块化设计，有丰富的模块库和第三方模块库，配置灵活。 在Linux操作系统下，nginx使用epoll事件模型，得益于此，nginx在Linux操作系统下效率相当高。同时Nginx在OpenBSD或FreeBSD操作系统上采用类似于epoll的高效事件模型kqueue。</p>
<pre><code>Nginx在官方测试的结果中，能够支持五万个平行连接，而在实际的运作中，可以支持二万至四万个平行链接。
</code></pre><h1 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h1><blockquote>
<p>本文中使用的是centos7 linux操作系统, 相关命令可能与centos5有所不同</p>
</blockquote>
<h2 id="直接安装"><a href="#直接安装" class="headerlink" title="直接安装"></a>直接安装</h2><p>在<code>centos7</code>下可以通过<code>yum</code>命令直接安装编译过的nginx服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx -y <span class="comment">#安装最新版本的nginx</span></span><br><span class="line">systemctl start nginx <span class="comment">#centos7替代service命令</span></span><br></pre></td></tr></table></figure>
<h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p>在<code>nginx</code>服务器中, 模块化设计是其一大特色, 在1.9.11之前的版本中, 我们都需要通过编译来添加和删除模块, 所以编译安装也是一个通点</p>
<h3 id="安装环境-yum"><a href="#安装环境-yum" class="headerlink" title="安装环境: yum"></a>安装环境: <code>yum</code></h3><p>先安装准备环境<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc gcc-c++ automake pcre pcre-devel zlip zlib-devel openssl openssl-devel</span><br></pre></td></tr></table></figure></p>
<p>gcc为GNU Compiler Collection的缩写，可以编译C和C++源代码等，它是GNU开发的C和C++以及其他很多种语言 的编译器（最早的时候只能编译C，后来很快进化成一个编译多种语言的集合，如Fortran、Pascal、Objective-C、Java、Ada、 Go等。）gcc 在编译C++源代码的阶段，只能编译 C++ 源文件，而不能自动和 C++ 程序使用的库链接（编译过程分为编译、链接两个阶段，注意不要和可执行文件这个概念搞混，相对可执行文件来说有三个重要的概念：编译（compile）、链接（link）、加载（load）。源程序文件被编译成目标文件，多个目标文件连同库被链接成一个最终的可执行文件，可执行文件被加载到内存中运行）。因此，通常使用 g++ 命令来完成 C++ 程序的编译和连接，该程序会自动调用 gcc 实现编译。<br>gcc-c++也能编译C源代码，只不过把会把它当成C++源代码，后缀为.c的，gcc把它当作是C程序，而g++当作是c++程序；后缀为.cpp的，两者都会认为是c++程序，注意，虽然c++是c的超集，但是两者对语法的要求是有区别的。<br>automake是一个从Makefile.am文件自动生成Makefile.in的工具。为了生成Makefile.in，automake还需用到perl，由于automake创建的发布完全遵循GNU标准，所以在创建中不需要perl。libtool是一款方便生成各种程序库的工具。<br>pcre pcre-devel：在Nginx编译需要 PCRE(Perl Compatible Regular Expression)，因为Nginx 的Rewrite模块和HTTP 核心模块会使用到PCRE正则表达式语法。<br>zlip zlib-devel：nginx启用压缩功能的时候，需要此模块的支持。<br>openssl openssl-devel：开启SSL的时候需要此模块的支持。</p>
<h3 id="下载相关安装包-wget"><a href="#下载相关安装包-wget" class="headerlink" title="下载相关安装包: wget"></a>下载相关安装包: <code>wget</code></h3><p>官方网址在<a href="http://nginx.org/" target="_blank" rel="external">http://nginx.org</a><br>你可以在这个页面查看当前仍旧支持的所有版本, <a href="http://nginx.org/download" target="_blank" rel="external">戳这里</a><br>在<code>linux</code>需要的目录下使用<code>wget</code>命令安装, 我的位置是<code>/root/</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.13.1.tar.gz <span class="comment">#下载对应文件</span></span><br><span class="line">tar xvf nginx-1.13.1.tar.gz <span class="comment">#x释放v报告相关信息f使用文件</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.13.1</span><br></pre></td></tr></table></figure></p>
<h3 id="编译nginx-configure"><a href="#编译nginx-configure" class="headerlink" title="编译nginx: ./configure"></a>编译nginx: <code>./configure</code></h3><p>首先需要使用<code>./configure</code>相关命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx --sbin-path=/usr/<span class="built_in">local</span>/nginx/sbin/nginx --conf-path=/usr/<span class="built_in">local</span>/nginx/conf/nginx.conf --error-log-path=/var/<span class="built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="built_in">log</span>/nginx/access.log --pid-path=/var/run/nginx/nginx.pid --lock-path=/var/<span class="built_in">local</span>/nginx.lock --usr=nginx --group=nginx --http-client-body-temp-path=/var/tmp/nginx/client/ --http-proxy-temp-path=/var/tmp/nginx/proxy/ --http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ --http-uwsgi-temp-path=/var/tmp/nginx/uwsgi --http-scgi-temp-path=/var/tmp/nginx/scgi --with-pcre</span><br></pre></td></tr></table></figure></p>
<p>以上命令分别设置安装路径, 运行文件路径, 配置文件路径, 报告错误路径, 访问路径等等, 部分内容可以在对应的主配置文件<code>nginx.conf</code>中修改。<br><img src="/2017/06/14/安装nginx服务器/configure.png" alt="configure"></p>
<h3 id="生成文件-make"><a href="#生成文件-make" class="headerlink" title="生成文件: make"></a>生成文件: <code>make</code></h3><p>编译生成nginx, 此时使用<code>make</code>命令, 会根据上一步生成的<code>Makefile</code>生成对应的模块<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure></p>
<p>运行结果大致如下:<br><img src="/2017/06/14/安装nginx服务器/make.png" alt="make"></p>
<h3 id="覆盖安装-make-install"><a href="#覆盖安装-make-install" class="headerlink" title="覆盖安装: make install"></a>覆盖安装: <code>make install</code></h3><p>创建相应目录, 如果已有目录, <code>nginx</code>主文件会覆盖之前的主文件</p>
<h1 id="配置文件-nginx-conf"><a href="#配置文件-nginx-conf" class="headerlink" title="配置文件 nginx.conf"></a>配置文件 <code>nginx.conf</code></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">user  nobody; #启动用户</span><br><span class="line">worker_processes  1; #启动进程数量</span><br><span class="line">events &#123; #设置网络连接</span><br><span class="line">    worker_connections  1024; #设置最大并发数</span><br><span class="line">&#125;</span><br><span class="line">http &#123; #http模块, 每个http模块包含多个server块, 用于监听不同的域名和端口请求,每个server块包含多个location块, server块可以配置文件引入、MIME-Type定义、日志自定义、是否启用sendfile、连接超时时间和单个链接的请求上限等</span><br><span class="line">    include       mime.types; #文件扩展名与文件类型映射表</span><br><span class="line">    default_type  application/octet-stream; #默认文件类型</span><br><span class="line">    sendfile        on; #是否调用 sendfile 函数来输出文件, 避免用户缓冲区和内核缓冲区之间的拷贝</span><br><span class="line">    keepalive_timeout  65; #超时时长</span><br><span class="line">    #gzip  on; #gzip压缩</span><br><span class="line">    server &#123; #设置一个虚拟主机, 监听端口</span><br><span class="line">        listen       80; #监听80端口</span><br><span class="line">        server_name  localhost; #当前虚拟主机的名称</span><br><span class="line">        location / &#123; #拦截 / 目录下所有的请求</span><br><span class="line">            root   html; #root是访问文件的真实路径, 可以是绝对路径或相对路径</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html; #服务器50x错误</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/03/模板替换及正则捕捉/" itemprop="url">
                  模板替换及正则捕捉
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-03T10:55:43+08:00" content="2017-06-03">
              2017-06-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日志/" itemprop="url" rel="index">
                    <span itemprop="name">日志</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在做关于模板替换的一些练习, 总结了一些经验。<br>平时当我们需要创建一个<code>HTML</code>元素的时候, 总是需要借助相关的api<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">node.className = data</span><br></pre></td></tr></table></figure></p>
<p>这样显得很繁琐, 累赘, 如果偷懒点也许会写成这样<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = <span class="string">`&lt;div class="<span class="subst">$&#123;data&#125;</span>"&gt;&lt;/div&gt;`</span></span><br></pre></td></tr></table></figure></p>
<p>但这是ES2015的新语法嘛, 所以我们可以尝试自己制作一个简单的模板替换<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = <span class="string">`&lt;div class="&#123;&#123;data&#125;&#125;"&gt;&lt;/div&gt;`</span></span><br></pre></td></tr></table></figure></p>
<p>如上所示, 我们需要用正则匹配相关变量名, 需要用到<code>string.prototype.replace()</code> 这个api<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> template = <span class="function"><span class="keyword">function</span>(<span class="params">tem, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> tem.replace(<span class="regexp">/&#123;&#123;(\w+)&#125;&#125;/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">str, p1</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (!p1)  </span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">return</span> data[p1]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>需要了解的是, <code>string.prototype.replace()</code>这个api的第一个参数是需要匹配的正则或是单独的字符串, 第二个参数可以是新的字符串, 也可以是一个<code>function</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match, p1, p2, p3, offset, string</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// match 代表匹配的子串</span></span><br><span class="line">    <span class="comment">// p1,p2, ... 代表被()正则符号捕捉的字符串</span></span><br><span class="line">    <span class="comment">// offset 代表匹配子串在原字符串的偏移量</span></span><br><span class="line">    <span class="comment">// string 原字符串</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"返回新字符串"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果需要支持对象, 需要对原函数进行改造<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> template = <span class="function"><span class="keyword">function</span>(<span class="params">tem, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> tem.replace(<span class="regexp">/&#123;&#123;(\w+(?:\.\w+)*)&#125;&#125;/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, p1</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// (?:) 在正则中不会捕捉相关子串, 但可以对其子串合并</span></span><br><span class="line">    <span class="keyword">if</span> (!p1)  </span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">const</span> arr = p1.split(<span class="string">'.'</span>)</span><br><span class="line">    <span class="keyword">let</span> datas = data</span><br><span class="line">    arr.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value, index</span>) </span>&#123;</span><br><span class="line">      datas = datas[value] || <span class="literal">null</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> datas</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 相关调用方法</span></span><br><span class="line"><span class="keyword">const</span> templateStr = <span class="string">`&#123;&#123;name&#125;&#125;`</span> </span><br><span class="line"><span class="keyword">const</span> newStr = template(templateStr, &#123;name:<span class="string">"成功"</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(newStr)</span><br></pre></td></tr></table></figure></p>
<p>模板内容替换成功<br><img src="/2017/06/03/模板替换及正则捕捉/success.png" alt="success"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/Javascript-Study-Notes/" itemprop="url">
                  Javascript Study Notes
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-09T22:11:03+08:00" content="2017-05-09">
              2017-05-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日志/" itemprop="url" rel="index">
                    <span itemprop="name">日志</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="function"><a href="#function" class="headerlink" title="function"></a>function</h1><h2 id="Function-declaration-statements"><a href="#Function-declaration-statements" class="headerlink" title="Function declaration statements"></a>Function declaration statements</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcname</span>(<span class="params">&#123;arguments&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return some statements</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Function-definition-expressions"><a href="#Function-definition-expressions" class="headerlink" title="Function definition expressions"></a>Function definition expressions</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> funcname = <span class="function"><span class="keyword">function</span>(<span class="params">&#123;arguments&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return some statements</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Function declaration statements may only appear at the top level of the funtion they are nested within.That is, function definitions may not appear within <strong>if</strong> statements, <strong>while</strong> loop, or any other statements.<br>The function declaration statement also declares the function name as a variable and assigns the function object to it. Like variables declared with <strong>var</strong>, functions defined with function definition statements are implicitly “hoisted” to the top of the containing script or function, so that they are visible throughout the script or function. With var, only the variable declaration is hoisted—the variable initialization code remains where you<br>placed it.<br>Both the function name and the function body are hoisted: all functions in a script or all nested functions in a function are declared before any other code is run. This means that you can invoke a Javascript function before you declare it.<br>Like the <strong>var</strong> statement, function declaration statements create variables that cannot be deleted. These variables are not read-only, however, and their value can be overwritten</p>
<h1 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h1><h2 id="deepclone"><a href="#deepclone" class="headerlink" title="deepclone"></a>deepclone</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.deepClone = <span class="function"><span class="keyword">function</span>(<span class="params">top</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> Obj = [];</span><br><span class="line">  <span class="keyword">if</span>(!top)</span><br><span class="line">    top = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(top === <span class="keyword">this</span>[key]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Obj[key] = <span class="keyword">typeof</span> <span class="keyword">this</span>[key] === <span class="string">'object'</span></span><br><span class="line">      ? Obj[key] = <span class="keyword">this</span>[key].deepClone(top)</span><br><span class="line">      : Obj[key] = <span class="keyword">this</span>[key];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.deepClone = <span class="function"><span class="keyword">function</span>(<span class="params">top</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> Obj = [];</span><br><span class="line">  <span class="keyword">if</span>(!top) &#123;</span><br><span class="line">    top = <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> <span class="keyword">this</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(top === <span class="keyword">this</span>[key]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span>[key] === <span class="string">'object'</span> )&#123;</span><br><span class="line">      Obj[key] = <span class="keyword">this</span>[key].deepClone(top)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span>[key] === <span class="string">'function'</span> &amp;&amp; </span><br><span class="line">      <span class="keyword">this</span>[key] !== <span class="built_in">Object</span>.prototype.deepClone)&#123;</span><br><span class="line">      <span class="comment">// will find the deepClone function in the prototype.Object</span></span><br><span class="line">      <span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">      func.prototype = <span class="keyword">this</span>[key].deepClone(top);</span><br><span class="line">      Obj[key] = <span class="keyword">new</span> <span class="keyword">this</span>[key];</span><br><span class="line">      Obj[key].prototype = <span class="keyword">new</span> func;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      Obj[key] = <span class="keyword">this</span>[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">oThis</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">"function"</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Function.prototype.bind - what is trying to be bound is not callable"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> aArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>), </span><br><span class="line">        fToBind = <span class="keyword">this</span>, </span><br><span class="line">        fNOP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">        fBound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> fToBind.apply(</span><br><span class="line">              <span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP &amp;&amp; oThis ? <span class="keyword">this</span> : oThis || <span class="built_in">window</span>,</span><br><span class="line">              aArgs.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>))</span><br><span class="line">          );</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    fNOP.prototype = fToBind.prototype;</span><br><span class="line">    fBound.prototype = <span class="keyword">new</span> fNOP();</span><br><span class="line">    <span class="keyword">return</span> fBound;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/Winter-Holiday-Plan/" itemprop="url">
                  Winter Holiday Plan
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-12T22:04:58+08:00" content="2017-01-12">
              2017-01-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日志/" itemprop="url" rel="index">
                    <span itemprop="name">日志</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="寒假计划-2017-1-12-2017-2-12"><a href="#寒假计划-2017-1-12-2017-2-12" class="headerlink" title="寒假计划 2017.1.12 ~ 2017.2.12"></a>寒假计划 <code>2017.1.12 ~ 2017.2.12</code></h2><p>-[X] Graphql <code>2017.1.14 ~ 2017.1.18</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// obj 代表这个函数返回的对象</span></span><br><span class="line"><span class="comment">// param 代表传入函数的参数</span></span><br><span class="line"><span class="comment">// context 代表对象注入的上下文</span></span><br><span class="line"><span class="comment">// info 函数的状态</span></span><br><span class="line">resolve: <span class="function"><span class="keyword">function</span>(<span class="params">obj, param, context, info</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return obj;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>-[X] mongodb <code>2017.1.20 ?</code></p>
<blockquote>
<p>Robomongo、Mongochef用作MongoDB可视化工具<br>后台运行需添加日志路径<br>mongoess, mongolass 作为连接mongodb的中间件</p>
</blockquote>
<p>-[X] node <code>2017.1.14 ?</code></p>
<blockquote>
<p>nvm、n管理node版本<br>nrm切换npm源</p>
</blockquote>
<p>-[X] memcached <code>2017.1.19 ?</code><br>-[X] docker</p>
<blockquote>
<p>images显示镜像, ps显示容器, rm删除容器, rmi删除镜像, tag标记<br>run commit build 相关命令<br>容器云保证最小开销,易扩展<br>数据保留在数据卷中,容器由Dockerfile创建</p>
</blockquote>
<p>-[ ] es2015,es2016 <code>2017.1.14 ?</code><br>-[ ] origami studio</p>
<blockquote>
<p>节点动效软件</p>
</blockquote>
<p>-[X] <del>koa</del>/express <code>2017.1.14 ?</code></p>
<blockquote>
<p>koa后面再说吧。。<br>关于express中headerSent公共属性与304缓存<br>express中使用res.headerSent公共属性判断是否发送了header,<br>我们知道header是早于body的,所以当我们在发送200头时,<br>client端才认为我们达成了一次正确请求,<br>当我在express中使用中间件的headerSent属性是否为true来判断是否发送了协议头,<br>却发现如下报错</p>
</blockquote>
<p><code>Error: Can&#39;t render headers after they are sent to the client.</code></p>
<blockquote>
<p>这是由于当我们请求时,如果缓存未过期,返回304协议头,将会不再进入路由,<br>但如果我们在此之前使用中间件判断时会出现headerSent为false的情况,<br>所以应当在中间件判断headerSent的位置判断协议头是否不为304<br>-[X] 函数式编程<br>函数一等公民, 一切变量都是函数<br>闭包, 调用外部函数中变量<br>内存泄漏, 父函数在闭包函数被释放前无法释放<br>回调, 函数入参<br>原型链<br>-[X] node单元测试<br>mocha是一种js测试框架:<br>describe是Test Suite的开始, 可相互嵌套,<br>it是测试模块,<br>before在beforeEach执行之前同步执行<br>beforeEach在每个it执行之前执行<br>afterEach在每个it执行之后执行<br>after在afterEach执行之后同步执行<br>xit, it.skip, 空函数 都会pending测试<br>supertest should istanbul<br>-[ ] 深度学习</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/07/安卓签名打包成Apk/" itemprop="url">
                  安卓签名打包成Apk
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-07T12:39:38+08:00" content="2016-06-07">
              2016-06-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/code/" itemprop="url" rel="index">
                    <span itemprop="name">code</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.使用keytool命令生成签名密钥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -v -keystore my-release-key.keystore  -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</span><br></pre></td></tr></table></figure></p>
<p>其中my-release-key.keystore是将要生成的文件名, my-key-alias也是自己取的名称, 都可以修改, 在之后会使用这两个名称, 所以需要记录一下<br>之后会询问你密钥库口令和密钥口令(两个密码可以不同,之后密钥口令也会用到,所以也不要忘记),以及相关的签名信息,直接填写即可</p>
<p>1+.使用Android Studio IDE 生成密钥</p>
<p>菜单中选择build-&gt;Generate Signed APK,<br>之后点击[Create new…],<br>直接填写相关信息即可,<br>最后会生成.jks结尾的文件,.jks和.keystore都可以用作签名,所以使用上没有区别</p>
<p>2.编辑android下的gradle.properties文件</p>
<p>添加如下代码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MYAPP_RELEASE_STORE_FILE=my-release-key.keystore    // 之前生成的文件名</span><br><span class="line">MYAPP_RELEASE_KEY_ALIAS=my-key-alias                // 生成签名时的<span class="built_in">alias</span>名称</span><br><span class="line">MYAPP_RELEASE_STORE_PASSWORD=store_password         // 密钥库口令</span><br><span class="line">MYAPP_RELEASE_KEY_PASSWORD=password                 // 密钥口令</span><br></pre></td></tr></table></figure></p>
<p>3.编辑工程文件中的android/app/build.gradle文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...  </span><br><span class="line">android &#123;  </span><br><span class="line">    ...  </span><br><span class="line">    defaultConfig &#123; ... &#125;  </span><br><span class="line">    signingConfigs &#123;  </span><br><span class="line">        release &#123;  </span><br><span class="line">            storeFile file(MYAPP_RELEASE_STORE_FILE)  </span><br><span class="line">            storePassword MYAPP_RELEASE_STORE_PASSWORD  </span><br><span class="line">            keyAlias MYAPP_RELEASE_KEY_ALIAS  </span><br><span class="line">            keyPassword MYAPP_RELEASE_KEY_PASSWORD  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    buildTypes &#123;  </span><br><span class="line">        release &#123;  </span><br><span class="line">            ...  </span><br><span class="line">            signingConfig signingConfigs.release  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">…</span><br></pre></td></tr></table></figure></p>
<p>4.在android的目录下使用dos命令行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradlew assembleRelease</span><br></pre></td></tr></table></figure></p>
<p>5.该命令运行结束之后，会在android/app/build/outputs/apk目录下面生成app-release.apk文件,即可用于发布</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/23/数据缓存及同步数据/" itemprop="url">
                  数据缓存及同步数据
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-23T23:52:40+08:00" content="2016-05-23">
              2016-05-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/code/" itemprop="url" rel="index">
                    <span itemprop="name">code</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前接的项目还有个有趣的需求, 是根据Id, 获得这一天之内所有关于这个Id的操作(类似于用户状态, 登录的Ip分布), 再以特定的数组形式输出到前台.即每次请求都会根据Id获取它所有的数据, 每个Id一天的数据量大概在3000条左右..我们的服务器是1M带宽, 1M内存的学生机..在MySql出现瓶颈之前, 服务器本身已经有点难以承担这个数据量了..</p>
<p>为了解决频繁请求数据库的问题, 于是自己写了个缓存, 本身是基于thinkphp框架写的网站:</p>
<p>首先获取Id和日期, 调用 cache 方法<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class IndexController extends Controller</span><br><span class="line">&#123;</span><br><span class="line">    public <span class="keyword">function</span> <span class="function"><span class="title">index</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$Id</span> = I(<span class="string">'get.Id'</span>);</span><br><span class="line">        <span class="variable">$date</span> = I(<span class="string">'get.date'</span>)?I(<span class="string">'get.date'</span>):date(<span class="string">'Y-m-d'</span>);</span><br><span class="line">        <span class="variable">$cacheArray</span> = <span class="variable">$this</span>-&gt;cache(<span class="variable">$date</span>, <span class="variable">$Id</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>之后是 cache 的实现, 其中调用用于查询日期的cacheVerify函数和组合数据信息的cachePush函数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">private <span class="keyword">function</span> cache(<span class="variable">$date</span>, <span class="variable">$Id</span>)</span><br><span class="line">&#123;</span><br><span class="line">    // 分解日期</span><br><span class="line">    <span class="variable">$dateArray</span> = explode(<span class="string">'-'</span>, <span class="variable">$date</span>);</span><br><span class="line">    // 判断年所代表的文件夹是否存在</span><br><span class="line">    <span class="keyword">if</span> (!is_dir(<span class="string">'./Public/Cache/'</span> . <span class="variable">$dateArray</span>[0] . <span class="string">'/'</span>))</span><br><span class="line">    // 不存在则生成以年命名的文件夹</span><br><span class="line">        mkdir(<span class="string">'./Public/Cache/'</span> . <span class="variable">$dateArray</span>[0] . <span class="string">'/'</span>, 0777, 1);</span><br><span class="line">    // 判断月所代表的文件夹是否存在</span><br><span class="line">    <span class="keyword">if</span> (!is_dir(<span class="string">'./Public/Cache/'</span> . <span class="variable">$dateArray</span>[0] . <span class="string">'/'</span> . <span class="variable">$dateArray</span>[1] . <span class="string">'/'</span>))</span><br><span class="line">    // 不存在则生成以月命名的文件夹</span><br><span class="line">        mkdir(<span class="string">'./Public/Cache/'</span> . <span class="variable">$dateArray</span>[0] . <span class="string">'/'</span> . <span class="variable">$dateArray</span>[1] . <span class="string">'/'</span>, 0777, 1);</span><br><span class="line">    // 添加以日命名的文件信息</span><br><span class="line">    <span class="variable">$file</span> = <span class="string">'./Public/Cache/'</span> . <span class="variable">$dateArray</span>[0] . <span class="string">'/'</span> . <span class="variable">$dateArray</span>[1] . <span class="string">'/'</span> . <span class="variable">$dateArray</span>[2] . <span class="string">'.json'</span>;</span><br><span class="line">    // 以读写形式打开, 同时基于PHP的特性, 如果文件不存在则会自动新建</span><br><span class="line">    <span class="variable">$files</span> = fopen(<span class="variable">$file</span>, <span class="string">'a+'</span>);</span><br><span class="line">    // 读取文件中的所有信息</span><br><span class="line">    <span class="variable">$files_json</span> = fread(<span class="variable">$files</span>, filesize(<span class="variable">$file</span>));</span><br><span class="line">    // 以 json_decode 的方法转为 array 数组</span><br><span class="line">    <span class="variable">$files_data</span> = json_decode(<span class="variable">$files_json</span>, <span class="literal">true</span>);</span><br><span class="line">    // 调用用于查询日期下的数据是否是最新的cacheVerify函数</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span> == <span class="variable">$this</span>-&gt;cacheVerify(<span class="variable">$files_data</span>, <span class="variable">$date</span>)) &#123;</span><br><span class="line">        // 不为最新则调用生成缓存的 cachePush 函数</span><br><span class="line">        <span class="variable">$query</span> = <span class="variable">$this</span>-&gt;cachePush(<span class="variable">$files_data</span>, <span class="variable">$date</span>, <span class="variable">$pondId</span>);</span><br><span class="line">        // 将生成的缓存数组 array 转为json, </span><br><span class="line">        // 同时JSON_UNESCAPED_UNICODE 变量用于将unicode转码,</span><br><span class="line">        // 但前提是PHP版本高于5.4</span><br><span class="line">        <span class="variable">$json</span> = json_encode(<span class="variable">$query</span>, JSON_UNESCAPED_UNICODE);</span><br><span class="line">        // 将生成的缓存信息写入文件中</span><br><span class="line">        fwrite(<span class="variable">$files</span>, <span class="variable">$json</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    // 关闭已打开的文件夹</span><br><span class="line">    fclose(<span class="variable">$files</span>);</span><br><span class="line">    // 返回产生的缓存数组</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$query</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>cacheVerify 的函数和cachePush 函数, 每次判断一下最新的ID和缓存中的ID是否相同, 如果相同则认为缓存是最新, 如果不同则需要更新缓存文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">private <span class="keyword">function</span> cacheVerify(array <span class="variable">$files_data</span>, <span class="variable">$date</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$lastId</span> = M()-&gt;query(<span class="string">'SELECT id FROM device_data WHERE locate("'</span> . <span class="variable">$date</span> . <span class="string">'",recv_time) ORDER BY id DESC LIMIT 1'</span>);</span><br><span class="line">    <span class="variable">$files_data_end</span>=end(<span class="variable">$files_data</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$files_data_end</span>[<span class="string">'id'</span>] == <span class="variable">$lastId</span>[0][<span class="string">'id'</span>])</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">private <span class="keyword">function</span> cachePush(array <span class="variable">$files_data</span>, <span class="variable">$date</span>, <span class="variable">$pondId</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$sql_select</span> = <span class="string">'</span><br><span class="line">    SELECT</span><br><span class="line">        DATA.id,</span><br><span class="line">        DATA.recv_time,</span><br><span class="line">    FROM</span><br><span class="line">        device_data AS DATA</span><br><span class="line">    JOIN device_depend AS depend ON depend.pondId ='</span> . <span class="variable">$pondId</span> . <span class="string">'</span><br><span class="line">    AND depend.deviceId = DATA.device_id</span><br><span class="line">    AND depend.group_id = DATA.group_id</span><br><span class="line">    WHERE</span><br><span class="line">        LOCATE("'</span> . <span class="variable">$date</span> . <span class="string">'", recv_time)</span><br><span class="line">    '</span>;</span><br><span class="line">    <span class="variable">$files_data_end</span>=end(<span class="variable">$files_data</span>);</span><br><span class="line">    <span class="keyword">if</span> (!empty(<span class="variable">$files_data_end</span>[<span class="string">'id'</span>])) &#123;</span><br><span class="line">        <span class="variable">$sql_select</span> .= <span class="string">" AND DATA.id&gt;"</span> . <span class="variable">$files_data_end</span>[<span class="string">'id'</span>] . <span class="string">';'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$query</span> = M()-&gt;query(<span class="variable">$sql_select</span>);</span><br><span class="line">    foreach(<span class="variable">$query</span> as <span class="variable">$key</span>=&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">        <span class="variable">$query</span>[<span class="variable">$key</span>][<span class="string">'recv_time'</span>]=str_replace(<span class="variable">$date</span>.<span class="string">' '</span>,<span class="string">""</span>,<span class="variable">$value</span>[<span class="string">'recv_time'</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (is_array(<span class="variable">$files_data</span>)) &#123;</span><br><span class="line">        <span class="variable">$query</span> = array_merge(<span class="variable">$files_data</span>, <span class="variable">$query</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$query</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/23/关于PHP的定时器/" itemprop="url">
                  关于PHP监听数据库的定时器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-23T23:34:54+08:00" content="2016-05-23">
              2016-05-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/code/" itemprop="url" rel="index">
                    <span itemprop="name">code</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天接触到一个项目, 需要在新增了数据之后监听字段, 如果超过 3 秒字段还不变化的话直接输出操作超时, 需要利用PHP完成一个<strong>实时监听数据</strong></p>
<p>完成思路主要是每秒发送一个请求查询字符串是否变化, 当超过 3 秒或者字段变化时跳出循环, 以下是具体实现<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class packet</span><br><span class="line">&#123;</span><br><span class="line">    private <span class="variable">$lastId</span>;</span><br><span class="line">    private <span class="variable">$DB</span>;</span><br><span class="line">    ...</span><br><span class="line">    private <span class="keyword">function</span> <span class="function"><span class="title">verify</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$sql_select</span> = <span class="string">'SELECT count(*) FROM raw_command WHERE id=:id AND ack_time IS NOT NULL ;'</span>;</span><br><span class="line">        // 已封装的查询方法, 使用PDO的prepare方法, 预保留字段.</span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$this</span>-&gt;DB-&gt;selectQuery(<span class="variable">$sql_select</span>, [<span class="string">':id'</span> =&gt; <span class="variable">$this</span>-&gt;lastId]);</span><br><span class="line">        // 返回字段是否变化.</span><br><span class="line">        <span class="built_in">return</span> count(<span class="variable">$data</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">function</span> <span class="function"><span class="title">timeKey</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$i</span> = 0;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> != 3) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$this</span>-&gt;verify()) &#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$i</span>++;</span><br><span class="line">            sleep(1);// 等待1s</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调用时, 直接调用 packet 的 timeKey 方法</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/16/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-16T15:37:33+08:00" content="2016-03-16">
              2016-03-16
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/16/新的开始/" itemprop="url">
                  新的开始
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-16T00:52:12+08:00" content="2016-03-16">
              2016-03-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日志/" itemprop="url" rel="index">
                    <span itemprop="name">日志</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是<strong>新的开始</strong>，我用hexo创建了第一篇文章。</p>
<p>通过下面的命令，就可以创建新文章<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\workspace\javascript\nodejs-hexo&gt;hexo new 新的开始</span><br><span class="line">[info] File created at D:\workspace\javascript\nodejs-hexo\source\_posts\新的开始.md</span><br></pre></td></tr></table></figure></p>
<p>感觉非常好。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="shenshun" />
          <p class="site-author-name" itemprop="name">shenshun</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shenshun</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
